<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8" />
    <title></title>
    <link href="/js/normalize.css" rel="stylesheet" type="text/css" />
    <link href="/js/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="/js/jtable.2.4.0/themes/metro/blue/jtable.min.css" rel="stylesheet" type="text/css" /> 
    <link href="https://code.jquery.com/ui/1.10.0/jquery-ui.min.css" rel="stylesheet" type="text/css" /> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/ui/1.10.0/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/js/jtable.2.4.0/jquery.jtable.min.js" type="text/javascript"></script>
</head>
<body>

<input type="hidden" id="userId" th:value="${userSessionInfo.getId()}" />


<h1> Manage Different Projects of all Types</h1>
<div id="JTableContainer" style="width: 1024px;"></div>
<script type="text/javascript">
    var processClick = function(event, data) {
        $('.jtable-data-row').off('click').on('click', (function() {
            var row_id = $(this).attr('data-record-key');
            alert('clicked row with id '+row_id);
        }));
    }

    $(document).ready(function () {
        //Prepare jTable
        $('#JTableContainer').jtable({
            title: 'Project Details',
            defaultSorting: 'id DESC',
            sorting: true,
            actions: {
                listAction: '/cmpe281project/api/projects/listProjects',
                createAction: '/cmpe281project/api/projects/createProject'
                // updateAction: '/cmpe281project/api/scrum/updateStory?userId='  + $('#userId').val() ,
//                 deleteAction: '/cmpe281project/api/scrum/deleteStory?userId=' +  + $('#userId').val()
            },
            fields: {
                id: {
                    title: 'ProjectID',
                    key: true,
                    list: false
                },
                projectname: {
                    title: 'ProjectName',
                    width: '10%'
                },
                projecttype: {
                    title: 'ProjectType',
                    width: '10%',
                    options: {'SCRUM' : 'Scrum', 'KANBAN' : 'Kanban', 'WATERFALL' : 'Waterfall'}
                },
                startdate: {
                    title: 'StartDate',
                    width: '10%',
                    type: 'date',
                    displayFormat: 'mm/dd/yy'
                },
                enddate: {
                    title: 'EndDate',
                    width: '10%',
                    type: 'date',
                    displayFormat: 'mm/dd/yy'
                },
                ownername: {
                    title: 'OwnerName',
                    width: '10%',
                    create: false,
                    edit: false
                }

            },
            recordsLoaded: processClick,
            rowInserted: processClick
        });

        $('#JTableContainer').jtable('load');
    });

</script>

</body>
</html>