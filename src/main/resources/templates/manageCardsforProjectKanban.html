<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <link href="/js/normalize.css" rel="stylesheet" type="text/css" />
    <link href="/js/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="/js/jtable.2.4.0/themes/metro/blue/jtable.min.css" rel="stylesheet" type="text/css" />
    <link href="https://code.jquery.com/ui/1.10.0/jquery-ui.min.css" rel="stylesheet" type="text/css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/ui/1.10.0/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/js/jtable.2.4.0/jquery.jtable.min.js" type="text/javascript"></script>
</head>
<body>
<input type="hidden" id="ProjectId" th:value="${project.getId()}" />
<input type="hidden" id="userId" th:value="${userSessionInfo.getId()}" />

<h1> Manage Cards for project <span th: text="${project.getProjectName()}"></span></h1>



<div id="TaskKanbanJTableContainer" style="..."></div>
<script type="text/javascript">
    var processClick = function(event, data) {
        $('.jtable-data-row').click(function() {
            var row_id = $(this).attr('data-record-key');
            alert('clicked row with id '+row_id);
        });
    }

    $(document).ready(function() {
        //Prepare JTable for Card
        $('#TaskKanbanJTableContainer').jtable({
            title: 'List of Kanban Cards',
            defaultSorting: 'taskName DESC',
            sorting: true,
            actions: {
                listAction: '/cmpe281project/api/kanban/listCards?projectId=' + $('#projectId').val(),
                createAction: '/cmpe281project/api/kanban/createCard?projectId=' + $('#projectId').val(),
                updateAction: '/cmpe281project/api/kanban/updateCard?projectId=' + $('#projectId').val(),
                deleteAction: '/cmpe281project/api/kanban/deleteCard?projectId=' + $('#projectId').val()
            },
            fields: {
                id: {
                    title: 'TaskId',
                    key: true,
                    list: true
                },
                status: {
                    title: 'Status',
                    options: {'1': 'Ready', '2': 'Inprogress', '3': 'Completed'},
                    width: '10%'
                },

                taskName: {
                    title: ' Card Name',
                    width: '10%',
                    sorting: true
                },

                taskDescription: {
                    title: 'Card Description',
                    width: '10%'
                },
                resourceName: {
                    title: 'Resource Name',
                    width: '10%'
                }

            },
            recordsLoaded: processClick,
            rowInserted: processClick
        });
        $('#TaskKanbanJTableContainer').jtable('load');
    });
</script>

</body>
</html>